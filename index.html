<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes">
<title>Stundenformular</title>
 
<style>
:root{
  --bg:#f4f6ff;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#64748b;
  --border:#e2e8f0;
  --danger:#ef4444;
  --accent:#4f46e5;
  --accent2:#06b6d4;
  --shadow:0 12px 28px rgba(0,0,0,.10);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:linear-gradient(180deg,#eef2ff 0%,var(--bg) 40%);
  color:var(--text);
}
.wrap{max-width:560px;margin:0 auto;padding:12px}
 
/* TOPBAR */
.topbar{
  position:sticky;
  top:10px;
  z-index:60;
  background:linear-gradient(135deg,rgba(79,70,229,.12),rgba(6,182,212,.10));
  border:1px solid var(--border);
  border-radius:18px;
  padding:10px;
  box-shadow:var(--shadow);
}
.btnrow{
  display:grid;
  grid-template-columns:1fr 1fr 1fr 1fr;
  gap:8px;
}
button{
  padding:12px;
  border-radius:14px;
  border:1px solid var(--border);
  font-weight:900;
  font-size:15px;
  cursor:pointer;
  background:#fff;
}
button.primary{
  background:linear-gradient(135deg,#111827,#1f2937);
  color:#fff;
}
button.send{
  background:linear-gradient(135deg,rgba(79,70,229,.95),rgba(6,182,212,.90));
  color:#fff;
}
button.danger{color:var(--danger)}
button:disabled{opacity:.55;cursor:not-allowed}
 
/* CARD */
.card{
  margin-top:10px;
  background:linear-gradient(135deg,rgba(79,70,229,.18),rgba(6,182,212,.12));
  border:1px solid var(--border);
  border-radius:18px;
  padding:14px;
}
label{font-weight:900}
input,select{
  width:100%;
  padding:12px;
  border-radius:14px;
  border:1px solid var(--border);
  font-size:16px;
}
 
/* TABLE */
.tableWrap{
  margin-top:10px;
  background:#fff;
  border:1px solid var(--border);
  border-radius:18px;
  overflow-x:auto;
  overflow-y:hidden;
  position:relative;
  -webkit-overflow-scrolling:touch;
  scroll-behavior:smooth;
  box-shadow:0 6px 16px rgba(0,0,0,.05);
}
.entryTable{
  width:720px;
  border-collapse:collapse;
}
.entryTable th{
  position:sticky;
  top:0;
  z-index:5;
  background:linear-gradient(90deg,rgba(79,70,229,.12),rgba(6,182,212,.10));
  font-weight:1000;
  font-size:13px;
  padding:8px 6px;
  border-bottom:1px solid var(--border);
}
.entryTable td{
  padding:8px 6px;
  border-bottom:1px solid var(--border);
}
.entryTable select,
.entryTable input[type="time"]{
  width:100%;
  padding:8px 10px;
  border-radius:14px;
  border:1px solid var(--border);
  font-size:14px;
}
.entryHours{
  background:#f8fafc;
  font-weight:900;
  text-align:right;
}
 
/* ACTIVE ROW */
.trActive td{
  background:linear-gradient(90deg,rgba(79,70,229,.10),rgba(6,182,212,.08));
}
.trActive td:first-child{
  box-shadow:inset 4px 0 0 rgba(79,70,229,.65);
}
 
/* SCROLL SHADOW */
.tableWrap::before,
.tableWrap::after{
  content:"";
  position:absolute;
  top:0;bottom:0;
  width:18px;
  pointer-events:none;
  opacity:0;
  transition:.2s;
}
.tableWrap::before{
  left:0;
  background:linear-gradient(90deg,rgba(15,23,42,.18),transparent);
}
.tableWrap::after{
  right:0;
  background:linear-gradient(270deg,rgba(15,23,42,.18),transparent);
}
.tableWrap.hasLeftShadow::before{opacity:1}
.tableWrap.hasRightShadow::after{opacity:1}
 
/* TOTAL */
.total{
  margin-top:12px;
  background:#fff;
  border:1px solid var(--border);
  border-radius:18px;
  padding:14px;
  font-size:22px;
  font-weight:1000;
  text-align:center;
}
</style>
</head>
 
<body>
<div class="wrap">
 
<div class="topbar">
  <div class="btnrow">
    <button class="primary" id="pdfBtn">PDF Export</button>
    <button id="prevBtn">PDF Vorschau</button>
    <button class="send" id="sendBtn">Senden</button>
    <button class="danger" id="delBtn">Alles löschen</button>
  </div>
</div>
 
<div class="card">
  <label>Name:</label>
  <input id="name">
</div>
 
<div class="tableWrap">
  <table class="entryTable">
    <thead>
      <tr>
        <th>Tag</th>
        <th>Kehre</th>
        <th>Beginn</th>
        <th>Ende</th>
        <th>Stunden</th>
      </tr>
    </thead>
    <tbody id="rows"></tbody>
  </table>
</div>
 
<div class="total">
  Gesamtstunden: <span id="sum">0 Std</span>
</div>
 
</div>
 
<script>
const ORTE=["Niendorf Nord","Hagenbecks Tierpark","Farmsen","Ochsenzoll"];
const rowsEl=document.getElementById("rows");
const sumEl=document.getElementById("sum");
 
function pad2(n){return String(n).padStart(2,"0")}
function daysInMonth(m,y){return new Date(y,m,0).getDate()}
 
function setActiveRow(tr){
  document.querySelectorAll(".trActive").forEach(x=>x.classList.remove("trActive"));
  if(tr) tr.classList.add("trActive");
  scrollActiveRowIntoView(tr);
}
 
function scrollActiveRowIntoView(tr){
  if(!tr)return;
  const topbar=document.querySelector(".topbar");
  const offset=(topbar?topbar.offsetHeight:0)+14;
  const rect=tr.getBoundingClientRect();
  if(rect.top<offset){
    window.scrollBy({top:rect.top-offset,behavior:"smooth"});
  }
  if(rect.bottom>window.innerHeight-80){
    window.scrollBy({top:rect.bottom-window.innerHeight+80,behavior:"smooth"});
  }
}
 
function autoHours(tr){
  const s=tr.querySelector(".start").value;
  const e=tr.querySelector(".end").value;
  if(!s||!e)return;
  let sm=s.split(":"); let em=e.split(":");
  let diff=(em[0]*60+ +em[1])-(sm[0]*60+ +sm[1]);
  if(diff<0) diff+=1440;
  const h=Math.round(diff/60*100)/100;
  tr.querySelector(".hours").value=h+" Std";
  updateTotal();
}
 
function updateTotal(){
  let sum=0;
  document.querySelectorAll(".hours").forEach(i=>{
    const v=parseFloat(i.value)||0;
    sum+=v;
  });
  sumEl.textContent=sum+" Std";
}
 
function build(){
  const now=new Date();
  const m=now.getMonth()+1;
  const y=now.getFullYear();
  const days=daysInMonth(m,y);
  rowsEl.innerHTML="";
  for(let d=1;d<=days;d++){
    const tr=document.createElement("tr");
    tr.innerHTML=`
      <td><b>${pad2(d)}.${pad2(m)}</b></td>
      <td>
        <select class="ort">
          <option value="" disabled selected>Wählen</option>
          ${ORTE.map(o=>`<option>${o}</option>`).join("")}
        </select>
      </td>
      <td><input type="time" class="start"></td>
      <td><input type="time" class="end"></td>
      <td><input class="hours entryHours" readonly></td>
    `;
    tr.querySelectorAll("select,input").forEach(el=>{
      el.addEventListener("focus",()=>setActiveRow(tr));
      el.addEventListener("change",()=>autoHours(tr));
    });
    rowsEl.appendChild(tr);
  }
  initTableShadows();
}
 
function initTableShadows(){
  const wrap=document.querySelector(".tableWrap");
  function update(){
    const max=wrap.scrollWidth-wrap.clientWidth;
    const left=wrap.scrollLeft;
    wrap.classList.toggle("hasLeftShadow",left>2);
    wrap.classList.toggle("hasRightShadow",left<max-2);
  }
  wrap.addEventListener("scroll",update,{passive:true});
  window.addEventListener("resize",update);
  update();
}
 
build();
</script>
 
</body>
</html>
 
