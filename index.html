<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Stundenformular</title>

<style>
:root{
  --bg:#f4f6ff;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#64748b;
  --border:#e2e8f0;
  --accent:#4f46e5;
  --accent2:#06b6d4;
  --shadow: 0 12px 28px rgba(0,0,0,.10);
}

*{ box-sizing:border-box; }

body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:linear-gradient(180deg, #eef2ff 0%, var(--bg) 40%);
  color:var(--text);
}

.wrap{ max-width:560px; margin:0 auto; padding:12px; }

/* TOPBAR */
.topbar{
  background:linear-gradient(135deg, rgba(79,70,229,.12), rgba(6,182,212,.10));
  border-radius:18px;
  padding:10px;
  box-shadow:var(--shadow);
}

.btnrow{
  display:grid;
  grid-template-columns:1fr 1fr 1fr 1fr;
  gap:8px;
}

button{
  width:100%;
  padding:11px;
  border-radius:14px;
  border:1px solid var(--border);
  font-weight:800;
  cursor:pointer;
  background:#fff;
}

button.primary{
  background:#111827;
  color:#fff;
}

button.send{
  background:linear-gradient(135deg,#4f46e5,#06b6d4);
  color:#fff;
}

button.danger{
  color:#ef4444;
  border-color:#ef4444;
}

/* CARD */
.card{
  margin-top:10px;
  background:linear-gradient(135deg, rgba(79,70,229,.15), rgba(6,182,212,.10));
  border-radius:18px;
  padding:14px;
}

label{ font-weight:900; }

input, select{
  width:100%;
  padding:11px;
  border-radius:14px;
  border:1px solid var(--border);
  font-size:15px;
}

.grid2{ display:grid; grid-template-columns:1fr 1fr; gap:8px; }

/* TABLE */
.tableCard{
  margin-top:12px;
  background:linear-gradient(135deg, rgba(79,70,229,.10), rgba(6,182,212,.08));
  border-radius:18px;
  padding:12px;
}

.tableHeadRow{
  display:flex;
  justify-content:space-between;
  margin-bottom:8px;
  font-weight:900;
}

.tableScroll{
  background:#fff;
  border-radius:16px;
  overflow:auto;
}

/* ðŸ”¥ KOMPAKT */
.entryTable{
  width:100%;
  border-collapse:collapse;
  table-layout:fixed;
  min-width:590px;
}

.entryTable th{
  padding:8px 6px;
  font-size:13px;
  font-weight:900;
  border-bottom:1px solid var(--border);
}

.entryTable td{
  padding:8px 6px;
  border-bottom:1px solid var(--border);
}

.entryTable select,
.entryTable input[type="time"]{
  padding:8px 9px;
  font-size:14px;
  border-radius:14px;
  border:1px solid var(--border);
}

.entryHours{
  padding:8px 9px;
  font-weight:900;
  text-align:right;
  background:#f8fafc;
}

/* ðŸ”¥ EXAKTE SPALTEN */
.colDay{ width:70px; }
.colKehre{ width:160px; }
.colTime{ width:105px; }
.colStd{ width:95px; }

/* Gesamt */
.total{
  margin-top:12px;
  font-weight:1000;
  font-size:20px;
  text-align:center;
}
</style>
</head>

<body>
<div class="wrap">

<div class="topbar">
  <div class="btnrow">
    <button class="primary" id="pdfBtn">PDF Export</button>
    <button id="prevBtn">PDF Vorschau</button>
    <button class="send" id="sendBtn">Senden</button>
    <button class="danger" id="delBtn">Alles lÃ¶schen</button>
  </div>
</div>

<div class="card">
  <label>Name:</label>
  <input id="name">

  <div style="margin-top:10px;">
    <label>Monat / Jahr</label>
    <div class="grid2" style="margin-top:6px;">
      <select id="month"></select>
      <select id="year"></select>
    </div>
  </div>
</div>

<div class="tableCard">
  <div class="tableHeadRow">
    <div>Eintragen</div>
    <div>â†” nach rechts wischen</div>
  </div>

  <div class="tableScroll">
    <table class="entryTable">
      <thead>
        <tr>
          <th class="colDay">Tag</th>
          <th class="colKehre">KEHRE</th>
          <th class="colTime">Beginn</th>
          <th class="colTime">Ende</th>
          <th class="colStd" style="text-align:right;">Stunden</th>
        </tr>
      </thead>
      <tbody id="rows"></tbody>
    </table>
  </div>
</div>

<div class="total">
  Gesamt: <span id="sum">0</span>
</div>

</div>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbw3-LIiVd6lG9on22RMTJcMYaMATy2y5Vxm6ep8idY6DWMjc2ThGPTtOHDIutL1pBPVnQ/exec"; // <-- ERSETZEN
const APP_PIN = "1234"; // optional
const PIN_BG_FILE = "nr3.jpg"; // bleibt so

const ORTE = [
  "Niendorf Nord",
  "Hagenbecks Tierpark",
  "Farmsen",
  "Ochsenzoll"
];

const rowsEl = document.getElementById("rows");
const sumEl = document.getElementById("sum");

function pad(n){ return String(n).padStart(2,"0"); }

function build(){
  rowsEl.innerHTML="";
  for(let d=1; d<=31; d++){
    const tr=document.createElement("tr");
    tr.innerHTML=`
      <td><b>${pad(d)}.02</b></td>
      <td>
        <select>
          <option value="">WÃ¤hlen</option>
          ${ORTE.map(o=>`<option>${o}</option>`).join("")}
        </select>
      </td>
      <td><input type="time" class="start"></td>
      <td><input type="time" class="end"></td>
      <td><input class="entryHours" readonly></td>
    `;
    rowsEl.appendChild(tr);
  }
}

function calc(){
  let sum=0;
  document.querySelectorAll("#rows tr").forEach(r=>{
    const s=r.querySelector(".start").value;
    const e=r.querySelector(".end").value;
    const out=r.querySelector(".entryHours");

    if(!s||!e){ out.value=""; return; }

    const sm=s.split(":");
    const em=e.split(":");
    let diff=(em[0]*60+ +em[1])-(sm[0]*60+ +sm[1]);
    if(diff<0) diff+=1440;

    const h=Math.round((diff/60)*100)/100;
    out.value=h; // ðŸ”¥ NUR ZAHL
    sum+=h;
  });
  sumEl.textContent=Math.round(sum*100)/100;
}

document.addEventListener("input",calc);
build();
</script>
</body>
</html>
